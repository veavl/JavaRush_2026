# Решение задачи
_Exported on 1/8/2026 at 12:41:11 GMT+3 from Cursor (2.2.44)_

---

**User**

Как я решил эту задачу?

---

**Cursor**


Проверяю решение в открытом файле.



## Решение задачи "Калькулятор"

1. **Бесконечный цикл** (`while (true)`) — программа работает до остановки пользователем.

2. **Ввод данных через Scanner**:
   - Два числа типа `double` (`d1`, `d2`)
   - Операция как строка (`operation`)
   - `sc.nextLine()` после `nextDouble()` очищает буфер от символа переноса строки

3. **Вычисление через if-else**:
   - Проверка операции (`equals()`)
   - Выполнение соответствующего действия: умножение (`*`), сложение (`+`), деление (`/`), вычитание (`-`)
   - Если операция не распознана — сообщение об ошибке

4. **Вывод результата** — результат выводится после вычисления.

**Особенности решения:**
- Использование `double` для работы с дробными числами
- Очистка буфера после `nextDouble()` перед `nextLine()`
- Обработка неизвестных операций
- Бесконечный цикл для повторных вычислений

Код работает корректно и выполняет основные арифметические операции.

---

**User**

Как проверить что введено именно число!

---

**Cursor**


Проверяю текущий код, чтобы добавить проверку, что введено число:



Добавляю проверку ввода числа. `nextDouble()` может выбросить исключение, если введено не число. Используем `hasNextDouble()` или `try-catch` для обработки ошибок:


```java
package module1.level_01.lecture_05;

import java.util.Scanner;

public class Calculator {

    public static void main(String[] args) {
        System.out.println("Привет. Это калькулятор.");
        System.out.println("Поочередно ведите, два числа и выражение для вычисления. " +
                "\nНапример '3', '2' и умножить '*'");

        while (true) {
            Scanner sc = new Scanner(System.in);

            double d1;
            System.out.print("Введите число №1: ");
            // Проверяем, что введено число
            if (sc.hasNextDouble()) {
                d1 = sc.nextDouble();
            } else {
                System.out.println("Ошибка! Введите корректное число.");
                sc.nextLine(); // Очищаем буфер от некорректного ввода
                continue; // Переходим к следующей итерации цикла
            }

            double d2;
            System.out.print("Введите число №2: ");
            // Проверяем, что введено число
            if (sc.hasNextDouble()) {
                d2 = sc.nextDouble();
            } else {
                System.out.println("Ошибка! Введите корректное число.");
                sc.nextLine(); // Очищаем буфер от некорректного ввода
                continue; // Переходим к следующей итерации цикла
            }

            sc.nextLine(); // Очищаем буфер от символа переноса строки. Альтернатива: считывать ВСЕ в строки
            System.out.print("Введите выражение: ");
            String operation = sc.nextLine();

            

            double result = 0;

//            switch (operation) {
//                case "+":
//                    result = d1 + d2;
//                    break;
//                case "-":
//                    result = d1 - d2;
//                    break;
//                case "*":
//                    result = d1 * d2;
//                    break;
//                case "/":
//                    result = d1 / d2;
//                    break;
//                default:
//                    System.out.println("Неизвестная операция");
//                    return;
//            }



            if (operation.equals("*"))
                result = d1 * d2;
            else if (operation.equals("+"))
                result = d1 + d2;
            else if (operation.equals("/"))
                result = d1 / d2;
            else if (operation.equals("-"))
                result = d1 - d2;
            else {
                System.out.println("Вы сделали что-то не так!");
                return;
            }

            System.out.println(result);
        }
    }
}

```


Добавлена проверка ввода числа. Вот что изменилось:

## Как работает проверка:

1. **`hasNextDouble()`** — проверяет, является ли следующее значение числом, не считывая его.
2. **Если число корректное** — считываем его через `nextDouble()`.
3. **Если число некорректное** — выводим сообщение об ошибке, очищаем буфер через `nextLine()` и переходим к следующей итерации цикла (`continue`).

## Альтернативный способ (через try-catch):

Если хотите использовать обработку исключений, можно так:

```java
try {
    d1 = sc.nextDouble();
} catch (InputMismatchException e) {
    System.out.println("Ошибка! Введите корректное число.");
    sc.nextLine();
    continue;
}
```

Текущий вариант с `hasNextDouble()` предпочтительнее, так как проверяет данные до чтения и не требует обработки исключений.

Теперь калькулятор корректно обрабатывает некорректный ввод и просит ввести число заново.

```java
try {
    d1 = sc.nextDouble();
} catch (InputMismatchException e) {
    System.out.println("Ошибка! Введите корректное число.");
    sc.nextLine();
    continue;
}
```

---

**User**

Верни как было

---

**Cursor**


Возвращаю код к исходному состоянию:


```java
package module1.level_01.lecture_05;

import java.util.Scanner;

public class Calculator {

    public static void main(String[] args) {
        System.out.println("Привет. Это калькулятор.");
        System.out.println("Поочередно ведите, два числа и выражение для вычисления. " +
                "\nНапример '3', '2' и умножить '*'");

        while (true) {
            Scanner sc = new Scanner(System.in);

            System.out.print("Введите число №1: ");
            double d1 = sc.nextDouble();
            System.out.print("Введите число №2: ");
            double d2 = sc.nextDouble();

            sc.nextLine(); // Очищаем буфер от символа переноса строки. Альтернатива: считывать ВСЕ в строки
            System.out.print("Введите выражение: ");
            String operation = sc.nextLine();

            

            double result = 0;

//            switch (operation) {
//                case "+":
//                    result = d1 + d2;
//                    break;
//                case "-":
//                    result = d1 - d2;
//                    break;
//                case "*":
//                    result = d1 * d2;
//                    break;
//                case "/":
//                    result = d1 / d2;
//                    break;
//                default:
//                    System.out.println("Неизвестная операция");
//                    return;
//            }



            if (operation.equals("*"))
                result = d1 * d2;
            else if (operation.equals("+"))
                result = d1 + d2;
            else if (operation.equals("/"))
                result = d1 / d2;
            else if (operation.equals("-"))
                result = d1 - d2;
            else {
                System.out.println("Вы сделали что-то не так!");
                return;
            }

            System.out.println(result);
        }
    }
}

```


Код возвращён к исходному состоянию: убраны проверки `hasNextDouble()`, восстановлен простой вызов `nextDouble()` для обоих чисел.

---

**User**

Дай название этому диалогу

---

**Cursor**


Варианты названия диалога:

1. **"Проверка ввода чисел в калькуляторе"**
2. **"Валидация числового ввода"**
3. **"Калькулятор: обработка некорректного ввода"**
4. **"Добавление проверки чисел (откат)"**

Рекомендую первый вариант — он отражает суть обсуждения.

